
bindir          = @bindir@
datadir         = @datadir@
datarootdir     = @datarootdir@
exec_prefix     = @exec_prefix@
includedir      = @includedir@
libdir          = @libdir@
mandir          = @mandir@
prefix          = @prefix@
srcdir		= @srcdir@

destdir		= $(prefix)/examples/app-fermi/wrapper/cee

INSTALL         = @INSTALL@

CC              = @CC@
CFLAGS		= @CFLAGS@
CDEBUGFLAGS	= -g -Wall
VPATH		= $(srcdir)

INCLUDES    	= -I$(srcdir)/../../../../src/core
LIBS		= -L../../../../src/core -lrappture \
		  -L$(libdir) -lexpat -lb64 -lz

CC_SWITCHES 	= $(CFLAGS) $(CDEBUGFLAGS) $(DEFINES) $(INCLUDES)

FILES		= \
		$(srcdir)/fermi.m \
		$(srcdir)/fermi.c \
		$(srcdir)/tool.xml 

all: fermi

fermi: fermi.c
	$(CC) $(CC_SWITCHES) $< -o $@ $(LIBS)

install: fermi
	$(INSTALL) -d $(destdir)
	for i in $(FILES) ; do \
	  $(INSTALL) -m 444 $$i $(destdir) ; \
	done
	$(INSTALL) -m 555 fermi $(destdir)

clean:
	$(RM) fermi run*.xml

distclean: clean
	$(RM) Makefile
