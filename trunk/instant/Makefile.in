
SHELL		= @SHELL@

srcdir		= @srcdir@
prefix		= @prefix@
exec_prefix	= @exec_prefix@
bindir		= @bindir@
libdir		= @libdir@
datadir		= @datadir@
datarootdir	= @datarootdir@
mandir		= @mandir@
includedir	= @includedir@

pkgdatadir	= $(datadir)/$(PKG_DIR)
pkglibdir	= $(libdir)/$(PKG_DIR)
pkgincludedir	= $(includedir)/$(PKG_DIR)
top_builddir	= .

MKDIR_P		= @MKDIR_P@
TCL_VERSION	= @TCL_VERSION@
TCLSH           = $(bindir)/tclsh$(TCL_VERSION)
INSTALL		= @INSTALL@

SCRIPTS		= \
		irappture

FILES		= \
		$(srcdir)/dragdrop.tcl \
		$(srcdir)/filmstrip.tcl \
		$(srcdir)/hierlist.tcl \
		$(srcdir)/main.tcl \
		$(srcdir)/objects.tcl \
		$(srcdir)/objpath.tcl \
		$(srcdir)/slideframes.tcl \
		$(srcdir)/tweener.tcl

IMAGEFILES	= \
		$(srcdir)/images/drag.xbm \
		$(srcdir)/images/dragm.xbm \
		$(srcdir)/images/treemn.png \
		$(srcdir)/images/treepl.png \
		$(srcdir)/images/warn24.png \
		$(srcdir)/images/err24.png

OBJECTFILES	= \
		$(srcdir)/objects/base.rp \
		$(srcdir)/objects/boolean.rp \
		$(srcdir)/objects/boolean.png \
		$(srcdir)/objects/curve.rp \
		$(srcdir)/objects/curve.png \
		$(srcdir)/objects/group.rp \
		$(srcdir)/objects/group.png \
		$(srcdir)/objects/histogram.rp \
		$(srcdir)/objects/histogram.png \
		$(srcdir)/objects/integer.rp \
		$(srcdir)/objects/integer.png \
		$(srcdir)/objects/note.rp \
		$(srcdir)/objects/note.png \
		$(srcdir)/objects/number.rp \
		$(srcdir)/objects/number.png \
		$(srcdir)/objects/phase.rp \
		$(srcdir)/objects/phase.png \
		$(srcdir)/objects/string.rp \
		$(srcdir)/objects/string.png \
		$(srcdir)/objects/tool.rp

TYPEFILES	= \
		$(srcdir)/types/boolean.tcl \
		$(srcdir)/types/color.tcl \
		$(srcdir)/types/file.tcl \
		$(srcdir)/types/string.tcl \
		$(srcdir)/types/units.tcl

VALIDATEFILES	= \
		$(srcdir)/validations/enable.tcl \
		$(srcdir)/validations/int.tcl \
		$(srcdir)/validations/number.tcl \
		$(srcdir)/validations/size.tcl

destdir         = $(libdir)/instant

all: tclIndex

tclIndex: $(FILES)
	$(TCLSH) $(srcdir)/../gui/tclconfig/mkindex.tcl --srcdir $(srcdir) \
		--outfile tclIndex

install: install-scripts install-files install-images install-objects \
	install-types install-validations

install-scripts: tclIndex
	$(MKDIR_P) -m 0755 $(destdir)
	$(INSTALL) -m 0444 tclIndex $(destdir)
	$(MKDIR_P) -m 0755 $(bindir)
	@for i in $(SCRIPTS); do \
	    echo "Installing $$i" ; \
	    $(INSTALL) -m 555 $$i $(bindir) ; \
	done

install-files: $(FILES)
	$(MKDIR_P) -m 0755 $(destdir)
	@for i in $(FILES); do \
	    echo "Installing $$i" ; \
	    $(INSTALL) -m 0555 $$i $(destdir) ; \
	done

install-images: $(IMAGEFILES)
	$(MKDIR_P) -m 0755 $(destdir)/images
	@for i in $(IMAGEFILES); do \
	    echo "Installing $$i" ; \
	    $(INSTALL) -m 0444 $$i $(destdir)/images ; \
	done

install-objects: $(OBJECTFILES)
	$(MKDIR_P) -m 0755 $(destdir)/objects
	@for i in $(OBJECTFILES); do \
	    echo "Installing $$i" ; \
	    $(INSTALL) -m 555 $$i $(destdir)/objects ; \
	done

install-types: $(TYPEFILES)
	$(MKDIR_P) -m 0755 $(destdir)/types
	@for i in $(TYPEFILES); do \
	    echo "Installing $$i" ; \
	    $(INSTALL) -m 555 $$i $(destdir)/types ; \
	done

install-validations: $(VALIDATEFILES)
	$(MKDIR_P) -m 0755 $(destdir)/validations
	@for i in $(VALIDATEFILES); do \
	    echo "Installing $$i" ; \
	    $(INSTALL) -m 555 $$i $(destdir)/validations ; \
	done

clean:
	$(RM) tclIndex tool.xml

distclean: clean
	$(RM) irappture
	$(RM) Makefile *~

