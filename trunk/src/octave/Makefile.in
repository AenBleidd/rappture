
bindir          = @bindir@
datadir		= @datadir@
datarootdir	= @datarootdir@
exec_prefix     = @exec_prefix@
includedir      = @includedir@
libdir          = @libdir@
mandir          = @mandir@
prefix          = @prefix@

INSTALL		= @INSTALL@
INSTALL_PROGRAM	= ${INSTALL} -m 755
INSTALL_DATA	= ${INSTALL} -m 644
INSTALL_SCRIPT	= ${INSTALL}

# tell make where to find the expat headers
INCL_RP_DEPS    = -I$(includedir)

# define the top of the rappture directory structure
RP_BASE   = @RP_BASE@

# define our compiling environment
#
OCT             = @MKOCTFILE@

# define our directories
#
LIB_DIR         = $(RP_BASE)/src
LIB_RAPPTURE    = -L$(LIB_DIR) -lrappture
INCL_RAPPTURE   = -I$(RP_BASE)/include
INCL_OCTAVE     = -I$(RP_BASE)/src/octave

OBJS=rpAddPresets.oct rpUtilsProgress.oct rpLib.oct rpLibChildrenByType.oct rpLibChildren.oct rpLibElementAsComp.oct rpLibElementAsId.oct rpLibElementAsObject.oct rpLibElementAsType.oct rpLibElement.oct rpLibGet.oct rpLibGetString.oct rpLibGetDouble.oct rpLibNodeComp.oct rpLibNodeId.oct rpLibNodeType.oct rpLibPut.oct rpLibPutDouble.oct rpLibPutString.oct rpLibPutFile.oct rpLibResult.oct rpLibXml.oct rpUnitsConvert.oct rpUnitsConvertDbl.oct rpUnitsConvertStr.oct rpUnitsConvertObjDbl.oct rpUnitsConvertObjStr.oct rpUnitsDefineUnit.oct rpUnitsFind.oct rpUnitsGetBasis.oct rpUnitsGetExponent.oct rpUnitsGetUnits.oct rpUnitsGetUnitsName.oct

all: $(OBJS)

#### Octave ########################################################
install: $(OBJS)
	@if test ! -d $(libdir)/octave; then \
		mkdir $(libdir)/octave; \
	fi
	$(INSTALL_DATA) *.oct* $(libdir)/octave
####################################################################

OCT_INCLS = $(INCL_OCTAVE) $(INCL_RAPPTURE) $(INCL_RP_DEPS)
OCTAVE_COMP_ARGS = $(OCT_INCLS) $(LIB_RAPPTURE)

rpAddPresets.oct: rpAddPresets.cc
	$(OCT) rpAddPresets.cc $(OCTAVE_COMP_ARGS)
rpUtilsProgress.oct: rpUtilsProgress.cc
	$(OCT) rpUtilsProgress.cc $(OCTAVE_COMP_ARGS)
rpLib.oct: rpLib.cc
	$(OCT) rpLib.cc $(OCTAVE_COMP_ARGS)
rpLibChildrenByType.oct: rpLibChildrenByType.cc
	$(OCT) rpLibChildrenByType.cc $(OCTAVE_COMP_ARGS)
rpLibChildren.oct: rpLibChildren.cc
	$(OCT) rpLibChildren.cc $(OCTAVE_COMP_ARGS)
rpLibElementAsComp.oct: rpLibElementAsComp.cc
	$(OCT) rpLibElementAsComp.cc $(OCTAVE_COMP_ARGS)
rpLibElementAsId.oct: rpLibElementAsId.cc
	$(OCT) rpLibElementAsId.cc $(OCTAVE_COMP_ARGS)
rpLibElementAsObject.oct: rpLibElementAsObject.cc
	$(OCT) rpLibElementAsObject.cc $(OCTAVE_COMP_ARGS)
rpLibElementAsType.oct: rpLibElementAsType.cc
	$(OCT) rpLibElementAsType.cc $(OCTAVE_COMP_ARGS)
rpLibElement.oct: rpLibElement.cc
	$(OCT) rpLibElement.cc $(OCTAVE_COMP_ARGS)
rpLibGet.oct: rpLibGet.cc
	$(OCT) rpLibGet.cc $(OCTAVE_COMP_ARGS)
rpLibGetString.oct: rpLibGetString.cc
	$(OCT) rpLibGetString.cc $(OCTAVE_COMP_ARGS)
rpLibGetDouble.oct: rpLibGetDouble.cc
	$(OCT) rpLibGetDouble.cc $(OCTAVE_COMP_ARGS)
rpLibNodeComp.oct: rpLibNodeComp.cc
	$(OCT) rpLibNodeComp.cc $(OCTAVE_COMP_ARGS)
rpLibNodeId.oct: rpLibNodeId.cc
	$(OCT) rpLibNodeId.cc $(OCTAVE_COMP_ARGS)
rpLibNodeType.oct: rpLibNodeType.cc
	$(OCT) rpLibNodeType.cc $(OCTAVE_COMP_ARGS)
rpLibPut.oct: rpLibPut.cc
	$(OCT) rpLibPut.cc $(OCTAVE_COMP_ARGS)
rpLibPutDouble.oct: rpLibPutDouble.cc
	$(OCT) rpLibPutDouble.cc $(OCTAVE_COMP_ARGS)
rpLibPutString.oct: rpLibPutString.cc
	$(OCT) rpLibPutString.cc $(OCTAVE_COMP_ARGS)
rpLibPutFile.oct: rpLibPutFile.cc
	$(OCT) rpLibPutFile.cc $(OCTAVE_COMP_ARGS)
rpLibResult.oct: rpLibResult.cc
	$(OCT) rpLibResult.cc $(OCTAVE_COMP_ARGS)
rpLibXml.oct: rpLibXml.cc
	$(OCT) rpLibXml.cc $(OCTAVE_COMP_ARGS)
rpUnitsConvert.oct: rpUnitsConvert.cc
	$(OCT) rpUnitsConvert.cc $(OCTAVE_COMP_ARGS)
rpUnitsConvertDbl.oct: rpUnitsConvertDbl.cc
	$(OCT) rpUnitsConvertDbl.cc $(OCTAVE_COMP_ARGS)
rpUnitsConvertStr.oct: rpUnitsConvertStr.cc
	$(OCT) rpUnitsConvertStr.cc $(OCTAVE_COMP_ARGS)
rpUnitsConvertObjDbl.oct: rpUnitsConvertObjDbl.cc
	$(OCT) rpUnitsConvertObjDbl.cc $(OCTAVE_COMP_ARGS)
rpUnitsConvertObjStr.oct: rpUnitsConvertObjStr.cc
	$(OCT) rpUnitsConvertObjStr.cc $(OCTAVE_COMP_ARGS)
rpUnitsDefineUnit.oct: rpUnitsDefineUnit.cc
	$(OCT) rpUnitsDefineUnit.cc $(OCTAVE_COMP_ARGS)
rpUnitsFind.oct: rpUnitsFind.cc
	$(OCT) rpUnitsFind.cc $(OCTAVE_COMP_ARGS)
rpUnitsGetBasis.oct: rpUnitsGetBasis.cc
	$(OCT) rpUnitsGetBasis.cc $(OCTAVE_COMP_ARGS)
rpUnitsGetExponent.oct: rpUnitsGetExponent.cc
	$(OCT) rpUnitsGetExponent.cc $(OCTAVE_COMP_ARGS)
rpUnitsGetUnits.oct: rpUnitsGetUnits.cc
	$(OCT) rpUnitsGetUnits.cc $(OCTAVE_COMP_ARGS)
rpUnitsGetUnitsName.oct: rpUnitsGetUnitsName.cc
	$(OCT) rpUnitsGetUnitsName.cc $(OCTAVE_COMP_ARGS)

docs:
	@if test ! -d docs; then \
		mkdir docs; \
	fi
	@if test ! -d docs/doxygen; then \
		mkdir docs/doxygen; \
	fi
	doxygen

#### CLEAN UP ############################################################
clean: 
	- rm -f rp*.o*

distclean: clean
	- rm Makefile
