
srcdir		= @srcdir@
prefix		= @prefix@
exec_prefix	= @exec_prefix@
bindir		= @bindir@
libdir		= @libdir@
datadir		= @datadir@
datarootdir	= @datarootdir@
mandir		= @mandir@
includedir	= @includedir@

SHELL		= @SHELL@
INSTALL		= @INSTALL@
MKDIR_P		= @MKDIR_P@
VPATH		= $(srcdir)
TCLSH		= @TCLSH@

PACKAGE_VERSION = @PACKAGE_VERSION@

version 	= $(PACKAGE_VERSION)
name 		= RapptureGUI$(version)

destdir		= $(libdir)/$(name)

FILES		= \
		pkgIndex.tcl 

.PHONY:	src scripts apps

all: scripts apps 

scripts:
	$(MAKE) -C scripts all
src:
	$(MAKE) -C all
apps:
	$(MAKE) -C apps all

install: install_scripts install_apps
	$(MKDIR_P) $(destdir)
	@for i in $(FILES); do \
	    echo "Installing $$i" ; \
	    $(INSTALL) -m 444 $$i $(destdir) ; \
	done 
	$(INSTALL) -m 444 pkgIndex.tcl $(destdir)

install_scripts: scripts
	$(MAKE) -C scripts install
install_apps: apps
	$(MAKE) -C apps install

test: 
	#$(TCLSH) `@CYGPATH@ $(srcdir)/tests/all.tcl` $(TESTFLAGS)

clean:
	$(MAKE) -C scripts clean
	$(MAKE) -C apps clean

distclean: 
	$(MAKE) -C scripts distclean
	$(MAKE) -C apps distclean
	$(RM) Makefile pkgIndex.tcl 
	$(RM) config.cache config.log config.status

