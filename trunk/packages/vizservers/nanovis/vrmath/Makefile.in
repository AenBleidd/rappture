
SHELL = /bin/sh

.PHONY: all install clean distclean

bindir          = @bindir@
datadir		= @datadir@
datarootdir	= @datarootdir@
exec_prefix     = @exec_prefix@
includedir      = @includedir@
libdir          = @libdir@
mandir          = @mandir@
prefix          = @prefix@
srcdir		= @srcdir@

INSTALL		= @INSTALL@
INSTALL_PROGRAM	= ${INSTALL} -m 555
INSTALL_DATA	= ${INSTALL} -m 444
INSTALL_SCRIPT	= ${INSTALL} -m 444
RM		= rm -f
AR		= ar rc
RANLIB		= @RANLIB@
CC		= @CC@
CXX		= @CXX@
VPATH		= $(srcdir)

RP_DIR          =  @RP_DIR@
RP_INC_SPEC     = -I$(RP_DIR)/include -I$(RP_DIR)/include/rappture2

INCLUDES	= \
		-I$(srcdir)/include \
		-I$(srcdir)/.. \
		$(RP_INC_SPEC)

CFLAGS		= @CFLAGS@ 
EXTRA_CFLAGS	= -Wall 
DEFINES		= @DEFINES@
CXX_SWITCHES	= $(CFLAGS) $(EXTRA_CFLAGS) $(INCLUDES)

VRMATHLIB	= vrmath.a

#		BBox.o \
#		BPlane.o \
# 		Color4f.o \
#		Projection.o \

OBJS		= \
		BBox.o \
		BPlane.o \
		Color4f.o \
		LineSegment.o \
		Matrix4x4f.o \
		Matrix4x4d.o \
		Plane.o \
		Quaternion.o \
		Rotation.o \
		Vector2f.o \
		Vector3f.o \
		Vector4f.o \

.PHONY: all install clean distclean

all: $(VRMATHLIB)

install: all

$(VRMATHLIB): $(OBJS)
	$(RM) $@
	$(AR) $@ $(OBJS) 
	$(RANLIB) $@

.cpp.o:
	$(CXX) $(CXX_SWITCHES) -o $@ -c $<

clean:
	$(RM) $(VRMATHLIB) $(OBJS)

distclean: clean
	$(RM) Makefile *~

BBox.o: $(srcdir)/include/vrmath/BBox.h $(srcdir)/include/vrmath/Vector3f.h
BPlane.o: $(srcdir)/include/vrmath/BPlane.h $(srcdir)/include/vrmath/Vector3f.h $(srcdir)/include/vrmath/LineSegment.h
Color4f.o: $(srcdir)/include/vrmath/Color4f.h
LineSegment.o: $(srcdir)/include/vrmath/LineSegment.h
Matrix4x4d.o: $(srcdir)/include/vrmath/Matrix4x4d.h $(srcdir)/include/vrmath/Vector3f.h $(srcdir)/include/vrmath/Vector4f.h $(srcdir)/include/vrmath/Rotation.h
Matrix4x4f.o: $(srcdir)/include/vrmath/Matrix4x4f.h $(srcdir)/include/vrmath/Vector3f.h $(srcdir)/include/vrmath/Vector4f.h $(srcdir)/include/vrmath/Rotation.h
Plane.o: $(srcdir)/include/vrmath/Plane.h $(srcdir)/include/vrmath/Matrix4x4f.h
Quaternion.o: $(srcdir)/include/vrmath/Quaternion.h $(srcdir)/include/vrmath/Rotation.h $(srcdir)/include/vrmath/Vector3f.h
Rotation.o: $(srcdir)/include/vrmath/Quaternion.h $(srcdir)/include/vrmath/Rotation.h $(srcdir)/include/vrmath/Vector3f.h
Vector2f.o: $(srcdir)/include/vrmath/Vector2f.h
Vector3f.o: $(srcdir)/include/vrmath/Vector3f.h $(srcdir)/include/vrmath/Matrix4x4f.h
Vector4f.o: $(srcdir)/include/vrmath/Vector4f.h $(srcdir)/include/vrmath/Matrix4x4f.h
