
# 1. Create a build directory

mkdir build
cd build

# 2. Untar the vmd and plugin sources
#    This creates a "plugins" and "vmd-1.9.1" subdirectories.

tar -xvf ../vmd-1.9.1.src.tar.gz

BUILDDIR=$PWD/vmd-1.9.1

patch -p1 < ../vmd-hubzero.patch

# 3. Build the plugins.

cd plugins

PLUGINDIR=$BUILDDIR/plugin

# Use the dated rappture directory, not the link.
RPDIR=/opt/hubzero/rappture/20130724

export PLUGINDIR

# 3. Build the plugins.

make LINUXAMD64 TCLINC=-I$RPDIR/include TCLLIB=-L$RPDIR/lib

# 3. Install the plugins.

make distrib

# 3. Build vmd itself.

cd ../vmd-1.9.1

mkdir LINUXAMD64

cd src

make RPDIR=$RPDIR
make install


