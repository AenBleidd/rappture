
TARGETS		= pymolproxy

CC		= @CC@
INCLUDES	= -I@TCL_INCL_DIR@
CFLAGS		= @CFLAGS@ 
EXTRA_CFLAGS	= -Wall 
DEFINES		= -DSTANDALONE
CC_SWITCHES	= $(CFLAGS) $(EXTRA_CFLAGS) $(DEFINES) $(INCLUDES)

bindir          = @bindir@
datadir		= @datadir@
datarootdir	= @datarootdir@
exec_prefix     = @exec_prefix@
includedir      = @includedir@
libdir          = @libdir@
mandir          = @mandir@
prefix          = @prefix@
srcdir		= @srcdir@

RP_DIR		= @RP_DIR@
INSTALL         = @INSTALL@
MKDIR_P		= @MKDIR_P@
VPATH		= $(srcdir)

.PHONY: all install clean distclean

OBJS		= pymolproxy.o
LIBS		= -ltcl8.4

all: $(TARGETS)

pymolproxy: $(OBJS) 
	$(CC) $(CC_SWITCHES) -o $@ $^ $(LIBS)

.c.o:
	$(CC) $(CC_SWITCHES) -o $@ -c $<

install: pymolproxy
	$(MKDIR_P) $(bindir)
	$(INSTALL) -m 555 pymolproxy $(bindir)/pymolproxy
	$(INSTALL) -m 555 $(srcdir)/pymol $(bindir)/pymol

clean:
	$(RM) a.out *.o *~ core* $(TARGETS) *.log *.tmp logfile* .deps/*.d

distclean: clean
	$(RM) Makefile
