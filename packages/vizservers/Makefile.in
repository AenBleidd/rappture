
bindir          = @bindir@
datadir		= @datadir@
datarootdir	= @datarootdir@
exec_prefix     = @exec_prefix@
includedir      = @includedir@
libdir          = @libdir@
mandir          = @mandir@
prefix          = @prefix@
srcdir		= @srcdir@

destdir		= $(prefix)/bin

INSTALL		= @INSTALL@
MKDIR_P		= @MKDIR_P@
SHELL		= @SHELL@
RM		= rm -f
VPATH		= $(srcdir)

SUBDIRS         = @SUBDIRS@
VTK_LIB_DIR	= @VTK_LIB_DIR@
CG_LIB_DIR	= @CG_LIB_DIR@

SUBDIRS		= nanoscale pymolproxy

ifneq ($(VTK_LIB_DIR),)
  SUBDIRS += vtkvis
endif

ifneq ($(CG_LIB_DIR),)
  SUBDIRS += nanovis
endif

.PHONY: $(SUBDIRS)

FILES		= \
		start_viz.sh

all:
	for i in $(SUBDIRS) ; do \
	  $(MAKE) -C $$i all || exit 1 ; \
	done

install:
	$(MKDIR_P) -m 0755 $(destdir)
	for i in $(SUBDIRS) ; do \
	  $(MAKE) -C $$i install || exit 1 ; \
	done
	$(INSTALL) -m 0555 start_viz.sh $(bindir)/start_viz.sh
	$(INSTALL) -m 0555 start_nanoscale.sh $(bindir)/start_nanoscale.sh

clean:
	for i in $(SUBDIRS) ; do \
	  $(MAKE) -C $$i clean ; \
	done

distclean:
	for i in $(SUBDIRS) ; do \
	  $(MAKE) -C $$i distclean ; \
	done
	$(RM) -r Makefile config.cache config.log config.status start_viz.sh start_nanoscale.sh *~ autom4te.cache